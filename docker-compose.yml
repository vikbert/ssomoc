version: '3'

services:

  php:
    build: ./docker/php
    image: base-php:latest
    volumes:
      - ./app:/var/www:cached

  nginx:
    build: ./docker/nginx
    image: base-nginx:latest
    volumes:
      - ./app:/var/www:cached
      - ./logs/nginx:/var/log/nginx:cached
    ports: [80:80, 443:443]

  db:
    build: ./docker/db
    image: base-db:latest
    environment:
      POSTGRES_USER: ssomoc
      POSTGRES_PASSWORD: ssomoc
      POSTGRES_DB: ssomoc
    ports: [2345:5432]
    restart: always


